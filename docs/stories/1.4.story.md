# Story 1.4: Core Layout & Navigation

## Status

**Complete**

---

## Story

**As a** user,
**I want** a consistent navigation structure across all pages,
**so that** I can easily move between features of the app.

---

## Acceptance Criteria

1. App layout with header, main content area, and mobile navigation
2. RetroUI styling applied to all layout components
3. Header displays TRIBE logo, language switcher, and user menu
4. Mobile-responsive hamburger menu for navigation
5. Navigation links to: Dashboard, Q&A, Audio Briefings, Profile
6. Active route highlighted in navigation
7. Footer with minimal branding (optional for MVP)

---

## Tasks / Subtasks

- [x] **Task 1: Create Header Component** (AC: 2, 3)
  - [x] Create `components/layout/Header.tsx`
  - [x] Add TRIBE logo/wordmark (text-based for MVP)
  - [x] Integrate LanguageSwitcher from Story 1.3
  - [x] Integrate UserMenu from Story 1.2
  - [x] Apply RetroUI styling: bold borders, neobrutalist aesthetic
  - [x] Make header sticky on scroll

- [x] **Task 2: Create Desktop Navigation** (AC: 5, 6)
  - [x] Create `components/layout/DesktopNav.tsx`
  - [x] Add navigation links: Dashboard, Q&A, Audio, Settings
  - [x] Use `usePathname()` to detect active route
  - [x] Highlight active link with distinct style (bold border, background)
  - [x] Use translation keys for all labels

- [x] **Task 3: Create Mobile Navigation** (AC: 4)
  - [x] Create `components/layout/MobileNav.tsx`
  - [x] Hamburger menu button visible on mobile only
  - [x] Slide-out dropdown menu with same links as desktop
  - [x] Close menu on navigation or outside click
  - [x] Animated hamburger icon transform

- [x] **Task 4: Create Dashboard Layout** (AC: 1)
  - [x] Create `app/[locale]/(dashboard)/layout.tsx`
  - [x] Include Header at top
  - [x] Main content area with proper padding
  - [x] Footer at bottom
  - [x] Responsive: single column on mobile, flexible on desktop

- [x] **Task 5: Create Footer Component** (AC: 7)
  - [x] Create `components/layout/Footer.tsx`
  - [x] Minimal content: "TRIBE © 2025"
  - [x] Stick to bottom or after content

- [x] **Task 6: Apply RetroUI Styling Throughout** (AC: 2)
  - [x] Consistent border-width (2-4px black borders)
  - [x] Shadow style: `shadow-brutal`
  - [x] Button styles: chunky, bold
  - [x] Color palette: high contrast, accessible

- [x] **Task 7: Create Dashboard Placeholder Page** (AC: 5)
  - [x] Update `app/[locale]/(dashboard)/dashboard/page.tsx`
  - [x] Display welcome message with user name
  - [x] Placeholder cards for: Chat, Audio, Settings
  - [x] Quick tip section with RetroUI styling

- [x] **Task 8: Add Navigation Translations** (AC: 5)
  - [x] Add dashboard card description keys to all 9 locale files
  - [x] Keys: chatDescription, audioDescription, settingsDescription, quickTip, quickTipText
  - [x] Verify translations display correctly

---

## Dev Notes

### File Structure
```
components/
└── layout/
    ├── Header.tsx          # Sticky header with logo, nav, user menu
    ├── DesktopNav.tsx      # Desktop navigation with active state
    ├── MobileNav.tsx       # Mobile hamburger menu
    ├── Footer.tsx          # Footer with branding
    ├── LanguageSwitcher.tsx  (from Story 1.3)
    └── UserMenu.tsx        # Clerk UserButton wrapper

lib/
└── navigation.ts           # Nav link configuration

app/
└── [locale]/
    └── (dashboard)/
        ├── layout.tsx      # Dashboard layout with Header/Footer
        └── dashboard/
            └── page.tsx    # Dashboard home page with cards
```

### Dependencies from Previous Stories
- Story 1.2: UserMenu component, authentication
- Story 1.3: LanguageSwitcher, translations, locale routing

---

## Testing

### Test Scenarios

1. **Header Display**
   - [ ] TRIBE logo visible and links to home
   - [ ] Language switcher works
   - [ ] User menu shows when authenticated

2. **Desktop Navigation**
   - [ ] All 4 nav links visible on desktop
   - [ ] Current page highlighted
   - [ ] Clicking link navigates correctly

3. **Mobile Navigation**
   - [ ] Hamburger visible on mobile viewport
   - [ ] Menu opens on click
   - [ ] Menu closes on link click
   - [ ] Menu closes on outside click

4. **Responsive Behavior**
   - [ ] Resize browser: desktop nav hides, mobile nav shows
   - [ ] Content remains readable at all sizes

5. **Active State**
   - [ ] Dashboard link highlighted on `/en/dashboard`
   - [ ] Q&A link highlighted on `/en/dashboard/chat`

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-21 | 1.0 | Initial story draft | Bob (SM) |
| 2025-12-21 | 1.1 | Implementation complete | James (Dev) |

---

## Dev Agent Record

### Agent Model Used
Claude Opus 4.5 (claude-opus-4-5-20251101)

### Debug Log References
- Footer unused import lint error fixed
- Dashboard restructured into (dashboard) route group

### Completion Notes List
- Header component with sticky positioning and RetroUI styling
- DesktopNav with usePathname() for active route detection
- MobileNav with animated hamburger, outside click to close
- UserMenu wrapping Clerk UserButton with SignedIn/SignedOut states
- Footer with current year and minimal branding
- Dashboard layout wrapping all protected pages
- Dashboard page with feature cards and quick tip
- All 9 translation files updated with new keys
- Build verified successful

### File List
**Created:**
- `apps/web/lib/navigation.ts` - Navigation link configuration
- `apps/web/components/layout/Header.tsx` - Main header component
- `apps/web/components/layout/DesktopNav.tsx` - Desktop navigation
- `apps/web/components/layout/MobileNav.tsx` - Mobile navigation
- `apps/web/components/layout/UserMenu.tsx` - User menu wrapper
- `apps/web/components/layout/Footer.tsx` - Footer component
- `apps/web/app/[locale]/(dashboard)/layout.tsx` - Dashboard layout
- `apps/web/app/[locale]/(dashboard)/dashboard/page.tsx` - Dashboard page

**Modified:**
- `apps/web/messages/*.json` - All 9 translation files with new dashboard keys

---

## QA Results
*To be filled by QA Agent*
